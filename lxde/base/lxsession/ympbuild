#!/usr/bin/env bash
name='lxsession'
release='1'
version='0.5.5'
url='https://lxde.org'
description='Lightweight X11 session manager'
email='akarsu@protonmail.com'
maintainer='akarsu'
license=('GPL2')
source=("https://salsa.debian.org/lxde-team/lxsession/-/archive/debian/$version-2/lxsession-debian-$version-2.tar.gz")
depends=(gtk3 polkit)
makedepends=(intltool vala docbook-xsl)
sha256sums=('c9ed57c23c682fbd33cf5a8092a5d5c5415a922f8e36d350dcbb637434db6843')
group=(lxde.base)
uses=()
arch=('x86_64')

cd $name-debian-$version-2

setup(){
    autoreconf -fvi
    ./configure --prefix=/usr\
        --sysconfdir=/etc \
        --libexecdir=/usr/libexec \
        --enable-gtk3 \
        --enable-buildin-clipboard \
        --libdir=/usr/lib64/ \
        --enable-buildin-polkit
}

build(){
    make $jobs
}

package(){
    make  DESTDIR="$DESTDIR" install $jobs
    # Ignore package by AppStream to avoid duplicated IDs
    echo 'X-AppStream-Ignore=true' >> "$DESTDIR/usr/share/applications/lxsession-default-apps.desktop"
    echo 'X-AppStream-Ignore=true' >> "$DESTDIR/usr/share/applications/lxsession-edit.desktop"
}

