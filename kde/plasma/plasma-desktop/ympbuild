#!/usr/bin/env bash
name='plasma-desktop'
release='3'
version='6.1.5'
url='https://de.org/plasma-desktop'
description='KDE Plasma Desktop'
email='aliriza.keskin@pardus.org.tr'
maintainer='aliriza'
license=('GPLv3')
source=("https://download.kde.org/stable/plasma/$version/plasma-desktop-$version.tar.xz")
depends=(accountsservice plasma-workspace setxkbmap libksysguard)
makedepends=(xf86-input-evdev xf86-input-libinput xorg-server)
sha256sums=('d9e236c9a9a332d8b7b4edde44c65d0b0ec38ea75adc5bbfa21a6c4c7f4261c2')
group=(kde.plasma)
uses=()
arch=('x86_64')

cd $name-$version

export LANG="C.UTF-8"
export LC_ALL=$LANG

prepare(){
    # Remove bloats from cmakelist.txt
    ## applets
    sed -i "/.*KDELibs4Support.*/d" CMakeLists.txt
    # Removed because of KDELibs4Support
    sed -i "/.*dateandtime.*/d" kcms/CMakeLists.txt
    # Replace dependency
    #sed -i "s/KSysGuard/KF5IconThemes/g" CMakeLists.txt
}

setup () {
    cmake -B build \
        -DCMAKE_INSTALL_PREFIX=/usr
}

build () {
    make -C build $jobs
}

package () {
    make -C build install $jobs
}

